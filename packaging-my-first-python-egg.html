<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Lorena Mesa</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/theme/styles.css">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <link rel="stylesheet" href="/theme/slicknav.css">
    <script src="/theme/jquery.slicknav.min.js"></script>
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <script type="text/javascript"
	    src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
    <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.2/html5shiv.js"></script>
    <![endif]-->
<script>
	$(function(){
		$('#menu').slicknav({'label':''});
	});
</script>
<link rel="icon" href="/theme/favicon.ico" sizes="16x16 32x32 48x48 64x64" type="image/vnd.microsoft.icon">
<link rel="apple-touch-icon" sizes="114x114" href="/theme/apple-touch-icon-precomposed.png">
<link rel="apple-touch-icon" sizes="152x152" href="/theme/favicon152.png">
<link rel="apple-touch-icon" sizes="196x196" href="/theme/favicon196.png">
  </head>

  <body>
    <div id="wrapper">

      <header>
	<nav class="byline"><ul id="menu">
            <li><a href="/">Home</a></li>
              <li><a href="/pages/outreach.html">Outreach</a></li>
              <li><a href="/pages/press.html">Press</a></li>
              <li><a href="/pages/speaking.html">Speaking</a></li>
        </ul></nav><!-- /#menu -->
        <div class="downloads">
          <a href="https://www.linkedin.com/in/lorenamesa" class="fa fa-linkedin"></a>
          <a href="http://www.github.com/lorenanicole" class="fa fa-github"></a>
          <a href="https://www.twitter.com/loooorenanicole" class="fa fa-twitter"></a>
          <a href="mailto:me@lorenamesa.com?Subject=Let%27s%20chat!" class="fa fa-envelope"></a>
        </div>
        <hgroup>
          <h1>Packaging my first Python egg</h1>
  <footer class="article-footer">
    <address class="vcard author">
      By           <a class="url fn" href="/author/lorena-mesa.html">Lorena Mesa</a>
    </address>
    <abbr class="published" title="2016-02-14T00:00:00-06:00">
       on 14.02.2016
    </abbr>
  </footer><!-- /.post-info -->
        </hgroup>
  


    <meta name="tags" contents="Python" />
    <meta name="tags" contents="packaging" />
    <meta name="tags" contents="egg" />
    <meta name="tags" contents="PyPi" />

      </header>
<section id="content" class="body article">
  <div class="entry-content">
    <p>In my efforts to make my life as an organizer for PyLadies Chicago a bit easier, I created my <a href="https://pypi.python.org/pypi?:action=display&amp;name=pyladies-digest&amp;version=0.31">first Python egg</a> <code>pyladies-digest</code> for a PyLadies tool I created and deployed it to PyPi.</p>
<h3>What's a Python egg?</h3>
<p>An egg is a Python packaging mechanism that makes it easy to include additional information for the installation of a project. A given egg will include a project's code, metadata, and any resources necessary to install the project. At runtime project dependencies are validated to ensure a project can be imported. </p>
<p>For a more detailed explanation about the benefits of a Python egg you can read this brief write up on <a href="http://peak.telecommunity.com/DevCenter/PythonEggs">PEAK - Python Enterprise Application Kit</a>.</p>
<h3>How can I create a Python egg?</h3>
<h4>Step 1: Create a <code>setup.py</code> file in the root of your project</h4>
<p>Let's review the <code>setup.py</code> file from my <a href="https://github.com/lorenanicole/chicago-pyladies-digest/blob/master/setup.py">Python egg</a>:</p>
<div class="highlight"><pre><span class="kn">import</span> <span class="nn">uuid</span>
<span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">setup</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">pip.req</span> <span class="kn">import</span> <span class="n">parse_requirements</span>

<span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="n">fname</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">__file__</span><span class="p">),</span> <span class="n">fname</span><span class="p">))</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="n">BASE_DIR</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="n">__file__</span><span class="p">))</span>
<span class="n">reqs_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s">&#39;requirements.txt&#39;</span><span class="p">)</span>
<span class="n">install_reqs</span> <span class="o">=</span> <span class="n">parse_requirements</span><span class="p">(</span><span class="n">reqs_file</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid1</span><span class="p">())</span>

<span class="n">setup</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s">&quot;pyladies-digest&quot;</span><span class="p">,</span>
    <span class="n">version</span><span class="o">=</span><span class="s">&quot;0.31&quot;</span><span class="p">,</span>
    <span class="n">author</span><span class="o">=</span><span class="s">&quot;Lorena Mesa&quot;</span><span class="p">,</span>
    <span class="n">author_email</span><span class="o">=</span><span class="s">&quot;me@lorenamesa.com&quot;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="p">(</span><span class="s">&quot;Command line tool to create a MailChimp &quot;</span>
    <span class="o">+</span> <span class="s">&quot; template for PyLadies chapters&quot;</span><span class="p">),</span>
    <span class="n">license</span><span class="o">=</span><span class="s">&quot;MIT&quot;</span><span class="p">,</span>
    <span class="n">keywords</span><span class="o">=</span><span class="s">&quot;pyladies email digest mailchimp&quot;</span><span class="p">,</span>
    <span class="n">install_requires</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;argparse&quot;</span><span class="p">,</span> <span class="s">&quot;requests&quot;</span><span class="p">,</span> <span class="s">&quot;pyyaml&quot;</span><span class="p">,</span> 
                      <span class="s">&quot;jinja2&quot;</span><span class="p">,</span> <span class="s">&quot;datetime&quot;</span><span class="p">,</span> <span class="s">&quot;beautifulsoup4&quot;</span><span class="p">],</span>
    <span class="n">url</span><span class="o">=</span><span class="s">&quot;https://github.com/lorenanicole/chicago-pyladies-digest&quot;</span><span class="p">,</span>
    <span class="n">packages</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;digest&#39;</span><span class="p">,</span> <span class="s">&#39;data&#39;</span><span class="p">,</span> <span class="s">&#39;templates&#39;</span><span class="p">],</span>
    <span class="n">include_package_data</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">package_data</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;templates&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;*&#39;</span><span class="p">],</span> <span class="s">&#39;data&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;*&#39;</span><span class="p">]},</span>
    <span class="n">long_description</span><span class="o">=</span><span class="n">read</span><span class="p">(</span><span class="s">&#39;README.md&#39;</span><span class="p">),</span>
    <span class="n">scripts</span><span class="o">=</span><span class="p">[</span>
        <span class="s">&#39;bin/pyladies-digest&#39;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">classifiers</span><span class="o">=</span><span class="p">[</span>
        <span class="s">&quot;License :: OSI Approved :: MIT License&quot;</span><span class="p">,</span>
        <span class="s">&quot;Programming Language :: Python :: 2.7&quot;</span>
    <span class="p">],</span>
</pre></div>


<p>Quick note on the project itself, the project is a command line tool to create <a href="http://mailchimp.com">MailChimp</a> templates for PyLadies digest emails. You can scrape data from MeetUp and <a href="http://lanyrd.com/">Lynard</a> for events and Python CFPs. Additionally the project can upload data from .csv files for volunteer, career, and miscellaneaous opportunities. </p>
<p>In the <code>setup</code> I've defined a few details including:</p>
<ul>
<li><code>name</code> - This will be the name of your project on PyPi.</li>
<li><code>version</code> - Everytime you update your project and wish to deploy it to PyPi you'll need to change the version. </li>
<li><code>install_requries</code> - This is the list of dependencies the project needs to succesfully install and run the project. You can think of this as the list of anything you would put in a <code>requirements.txt</code> file.</li>
<li><code>scripts</code> - This project is a command line tool and the specified script <code>bin/pyladies-digest</code> is the Python file that runs.</li>
<li><code>classifiers</code> - Defines categories you can tag your project with. The list of all catefories are <a href="https://pypi.python.org/pypi?%3Aaction=list_classifiers">here</a>.</li>
</ul>
<p>Some of the more interesting details here include the <code>packages</code>,  <code>include_package_data</code>, and <code>package_data</code>. Since the project includes non-Python files you'll need to specify that you wish to include additional packages (in this case <code>templates</code> and <code>data</code>) that hold non-Python assets. There are other ways to incude data files in a Python egg, <a href="https://pythonhosted.org/setuptools/setuptools.html#including-data-files">you can read here</a> for more information.</p>
<h4>Step 2: Build the egg</h4>
<p>Now that you've created your <code>setup.py</code> file you will need to build the egg locally. Run the following three commands to create and build your Python egg:</p>
<div class="highlight"><pre>python setup.py build
python setup.py sdist
python setup.py bdist_egg
</pre></div>


<p>I'd advise trying to see if you can install the egg locally and see if it works (try a <code>virtualenv</code>). Note where the egg was built in your project - it'll be in a <code>dist</code> directory. If you <code>cd</code> into that directory you should see something like - <code>pyladies_digest-0.31-py2.7.egg</code>. Note that the egg is defined by the following convention <code>project_name-version-python-version.egg</code>. </p>
<p>To install you can use <code>easy_install</code>:</p>
<p><code>easy_install /path/to/egg/pyladies_digest-0.31-py2.7.egg</code></p>
<p>If it installs successfully and you can load it up to use it you're ready to upload it!</p>
<h4>Step 3: Upload the egg to PyPi</h4>
<p>You'll need to first define a <code>.pypirc</code> file your root directory. Inside you should list your server credentials for PyPi. If you haven't registered before, <a href="https://pypi.python.org/pypi">go to PyPi</a> and sign up. You will need a password that is at least 16 characters long, I use <a href="https://lastpass.com/">LastPass</a> to generate passwords.</p>
<p>.pypirc</p>
<div class="highlight"><pre><span class="k">[server-login]</span>
<span class="err">username:</span> <span class="err">hedwig</span>
<span class="err">password:</span> <span class="err">lives</span>
</pre></div>


<p>You can then, <code>register</code> and <code>upload</code> your egg:</p>
<div class="highlight"><pre>python setup.py register
python setup.py sdist upload
</pre></div>


<p>Navigate to PyPi and review your project! You may want to edit the project description or delete an old version should you publish a new one (granted this can be problematic should anyone requrie your old versions for their projects). Side note - the PyPi docs (where you can document how to use your project) support <a href="http://docutils.sourceforge.net/rst.html">reStructuredText</a>, not my favorite, and it does not appear to support Markdown. </p>
<h3>More resources</h3>
<p>If you would like a more detailed guide for creating an egg, the <a href="http://zestreleaser.readthedocs.org/en/latest/uploading.html">docs</a> are very easy to read. They go into detail about other distribution formats too (like <code>wheels</code>, something I will be trying my hand at soon).</p>
<p>The Python <code>setuptools</code> <a href="https://pythonhosted.org/an_example_pypi_project/setuptools.html">docs</a> are quite helpful too, there's more arguments I did not review for <code>setup</code> that may be necessary for your project.</p>
  </div><!-- /.entry-content -->
  <div class="article-share-tags">
  <div class="end-article-tags">
      <i class="fa fa-tags"></i>
      <a href="/tag/python.html">Python</a>
      <a href="/tag/packaging.html">packaging</a>
      <a href="/tag/egg.html">egg</a>
      <a href="/tag/pypi.html">PyPi</a>
  </div>
  <div class='article-share'>
      share -
      <a target="_blank" href="http://twitter.com/share?text=Packaging my first Python egg&amp;url=/packaging-my-first-python-egg.html"><i class='fa fa-twitter'></i></a>
      <a target="_blank" href="http://facebook.com/sharer.php?t=Packaging my first Python egg&amp;u=/packaging-my-first-python-egg.html"><i class='fa fa-facebook'></i></a>
      <a target="_blank" href="http://plus.google.com/share?text=Packaging my first Python egg&amp;url=/packaging-my-first-python-egg.html"><i class='fa fa-google-plus'></i></a>
  </div>
  </div>
</section>
<div class="neighbors">
</div>
<section>
	<div id="disqus_thread"></div>
    <script type="text/javascript">
     var disqus_config = function () {
      this.page.url = "http://lorenamesa.com/packaging-my-first-python-egg.html"//"http://www.lorenamesa.com/so-you-want-to-code.html"; // Replace PAGE_URL with your page's canonical URL variable
      this.page.identifier = 'packaging-my-first-python-egg.html'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
      };

      (function() { // DON'T EDIT BELOW THIS LINE
      var d = document, s = d.createElement('script');

      s.src = '//allyourcodebelongtome.disqus.com/embed.js';

      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>
      <footer>
	  <a href="" >Home</a>
	  <div class="right-footer">
	  <a href="/categories.html" >Categories</a>
	  <a href="/tags.html" >Tags</a>
	  </div>
      </footer>
</body>
</html>